"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var react=require("react"),index_js=require("react-dom-html-tags"),invariant=_interopDefault(require("invariant")),server=require("react-dom-html/server"),_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},objectWithoutProperties=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r};function message(e){return"[react-dom-html-tags/server] "+e}function getAppElement(e,t){return react.isValidElement(t)?t:e}function resolveOptionalElement(e){return react.isValidElement(e)||"function"!=typeof e?e:e()}function getRenderOptions(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=a.appContainerTagName,i=a.appContainerId,d=a.beforeAppContainer,l=a.afterAppContainer,m=objectWithoutProperties(a,["appContainerTagName","appContainerId","beforeAppContainer","afterAppContainer"]);if(n.setStaticServerRender(t),n._hasSerializedState()){var p=n._getSerializedState(),s=p.appTagName,c=p.htmlAttributes,u=p.bodyAttributes,v=p.appAttributes,S=p.head;return _extends({},m,{htmlElement:react.createElement("html",c),bodyElement:react.createElement("body",u),headElement:S,appContainerElement:react.createElement(s,v),beforeAppContainerElement:resolveOptionalElement(d),afterAppContainerElement:resolveOptionalElement(l)})}var h=n.getServerAttributes(r,{appContainerTagName:o,appContainerId:i}),g=h.appTagName,f=h.htmlAttributes,E=h.headAttributes,T=h.bodyAttributes,H=h.appAttributes;return _extends({},m,{htmlElement:react.createElement("html",f),bodyElement:react.createElement("body",T),headElement:react.createElement("head",E,index_js.createHeadChildren(r,n)),appContainerElement:react.createElement(g,H),beforeAppContainerElement:resolveOptionalElement(d),afterAppContainerElement:resolveOptionalElement(l)})}function renderHtmlToString(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return renderString("renderHtmlToString",server.renderHtmlToString,!1,e,t)}function renderHtmlToStaticMarkup(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return renderString("renderHtmlToStaticMarkup",server.renderHtmlToStaticMarkup,!0,e,t)}function renderString(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=a.htmlMetadata,i=a.head,d=objectWithoutProperties(a,["htmlMetadata","head"]);o&&invariant(o.isServerStringRender(),message("Invalid `htmlMetadata` instance, not created for server string render."));var l=o||index_js.HtmlMetadata.createForServerStringRender(),m=index_js.withHtmlProvider(n,l),p=getAppElement(m,n);return t(m,{htmlElements:function(){return i&&!l._hasSerializedState()&&l.appendHead(resolveOptionalElement(i)),getRenderOptions(e,r,p,l,d)}})}function renderHtmlToNodeStream(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return renderToStream("renderHtmlToNodeStream",server.renderHtmlToNodeStream,!1,e,t)}function renderHtmlToStaticNodeStream(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return renderToStream("renderHtmlToStaticNodeStream",server.renderHtmlToStaticNodeStream,!0,e,t)}function renderToStream(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=a.htmlMetadata;o&&invariant(o.isServerStreamRender(),message("Invalid `htmlMetadata` instance, not created for server string render."));var i=o||index_js.HtmlMetadata.createForServerStreamRender(),d=index_js.withHtmlProvider(n,i);return t(d,getRenderOptions(e,r,getAppElement(d,n),i,a))}exports.HTML5_DOCTYPE=server.HTML5_DOCTYPE,exports.renderHtmlToString=renderHtmlToString,exports.renderHtmlToStaticMarkup=renderHtmlToStaticMarkup,exports.renderHtmlToNodeStream=renderHtmlToNodeStream,exports.renderHtmlToStaticNodeStream=renderHtmlToStaticNodeStream;
